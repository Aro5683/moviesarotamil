<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movies Page</title>
<style>
/* Base styling */
body, .page-body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 1rem;
  background: #f9f9f9;
  color: #333;
  box-sizing: border-box;
}

/* Header */
.header-bar {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 70px;
  background: #4a90e2;
  color: #fff;
  padding: 0 1rem;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.header-bar h1 {
  margin: 0;
  font-size: 26px;
  text-align: center;
  letter-spacing: 1px;
}

/* Main container for links */
.links-section {
  margin-top: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Individual link container */
.link-box {
  background: #ffffff;
  border-radius: 8px;
  padding: 12px 15px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  transition: transform 0.2s, box-shadow 0.2s;
}
.link-box:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

/* Link text */
.link-text {
  color: #4a90e2;
  text-decoration: none;
  font-size: 16px;
}
.link-text:hover {
  color: #1c5db6;
}

/* Pagination container */
.pagination-section {
  margin-top: 20px;
}
.pagination-title {
  font-weight: bold;
  margin-bottom: 8px;
}

/* Horizontal pagination links */
.pagination-links {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding: 5px 0;
  -webkit-overflow-scrolling: touch;
}
.pagination-links::-webkit-scrollbar {
  height: 6px;
}
.pagination-links::-webkit-scrollbar-thumb {
  background: #4a90e2;
  border-radius: 3px;
}
.pagination-links::-webkit-scrollbar-track {
  background: #e0e0e0;
}

/* Individual page link */
.page-link {
  display: inline-block;
  padding: 6px 12px;
  background: #e6f0fa;
  color: #4a90e2;
  border-radius: 5px;
  text-decoration: none;
  font-size: 14px;
  transition: background 0.2s, color 0.2s;
}
.page-link:hover, .page-link.active {
  background: #4a90e2;
  color: #fff;
}

/* Spinner */
.loading-spinner {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 40px 0;
}
.loading-spinner div {
  border: 5px solid #e6f0fa;
  border-top: 5px solid #4a90e2;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Back button */
.back-button {
  display: none;
  padding: 8px 16px;
  margin: 20px 0;
  background: #4a90e2;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.2s;
}
.back-button:hover {
  background: #1c5db6;
}

/* Alert box */
.custom-alert {
  position: fixed;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
  background: #ffffff;
  padding: 20px 25px;
  border-radius: 8px;
  color: #333;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  z-index: 9999;
  display: none;
}
.custom-alert button {
  margin-top: 10px;
  padding: 6px 12px;
  background: #4a90e2;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  color: #fff;
}
.custom-alert button:hover {
  background: #1c5db6;
}
</style>
</head>
<body class="page-body">

<div class="header-bar">
  <h1>Movies Hub</h1>
</div>

<div id="output" aria-live="polite"></div>

<div>
  <div id="links" class="links-section">
    <div class="loading-spinner"><div></div></div>
  </div>

  <div id="number-section"></div>
  <br/>
  <button id="backBtn" class="back-button">Back</button>
</div>

<script>
// JavaScript from your original script (kept intact)
const excludedTexts = [
  "Tamil Single Parts Movies","Tamil HD Mobile Movies","Tamil Dubbed Movies (Hollywood)",
  "Tamil A to Z Movies","Latest Tamil Web Series","Tamil Dubbed Movies",
  "Tamil Daily Movies","Moviesda Dubbed Movies","isaiDub Dubbed Movies",
  "isaimini 2025 Movies","Request a Movie","Moviesda Home","Disclaimer",
  "DMCA","Contact Us","About Us","Download Now",
  "0-9","Facebook Fan Page","Watch Online Server 1","Watch Online Server 2","Home",
  "SMS","Facebook","Twitter","Whatsapp","Telegram Channel","Latest Movies Updates","Tamil Movies Collection"
];

const mainContainer = document.getElementById('links');
const numberSection = document.getElementById('number-section');
const backBtn = document.getElementById('backBtn');
const proxyUrl = 'https://api.codetabs.com/v1/proxy/?quest=';
const historyStack = [];

async function loadLinksFromUrl(url, isFinalPage = false) {
  mainContainer.innerHTML = `<div class="loading-spinner"><div></div></div>`;
  numberSection.innerHTML = '';
  if (!isFinalPage) historyStack.push(url);

  try {
    const response = await fetch(proxyUrl + encodeURIComponent(url));
    if (!response.ok) throw new Error("Network Error");
    const html = await response.text();
    const doc = new DOMParser().parseFromString(html, 'text/html');

    doc.querySelectorAll('.incoming-search-terms').forEach(el => el.remove());

    const links = doc.querySelectorAll('a');

    let validUl = null;
    for (const ul of doc.querySelectorAll('ul')) {
      if (!ul.closest('.incoming-search-terms')) { validUl = ul; break; }
    }

    mainContainer.innerHTML = '';
    const numberContainer = document.createElement('div');
    numberContainer.className = 'number-links';

    if (validUl) {
      const div = document.createElement('div');
      div.className = 'link-container';
      div.appendChild(validUl.cloneNode(true));
      mainContainer.appendChild(div);
    }

    links.forEach(link => {
      let text = link.textContent.trim();
      let href = link.getAttribute('href');
      if (!text || !href || excludedTexts.includes(text)) return;
      if (text.length === 1 && /[a-zA-Z]/.test(text)) return;
      if (/moviesda(\.mobi)?/i.test(text)) {
        text = 'Movies Aro - ' + text.replace(/moviesda(\.mobi)?/ig, '').trim();
      }
      if (href.startsWith('/')) href = 'https://1moviesda.io' + href;
      else if (!href.startsWith('http')) href = 'https://1moviesda.io/' + href;

      const match5Digit = href.match(/(\d{5})/);
      if (!isFinalPage && match5Digit) {
        loadLinksFromUrl('https://download.moviespage.site/download/page/' + match5Digit[1], true);
        return;
      }

      const isDigit = /^\d{1,2}$/.test(text);
      if (isDigit) text += ' Page';
      const div = document.createElement('div');
      div.className = 'link-container';

      const nameLink = document.createElement('a');
      nameLink.textContent = text;
      nameLink.className = 'link-text';

      if (isFinalPage) {
        nameLink.href = href;
        nameLink.target = '_self';
      } else {
        nameLink.href = '#';
        nameLink.addEventListener('click', e => {
          e.preventDefault();
          loadLinksFromUrl(href);
        });
      }
      div.appendChild(nameLink);
      if (isDigit) numberContainer.appendChild(div);
      else mainContainer.appendChild(div);
    });

    if (numberContainer.children.length > 0) {
      const title = document.createElement('div');
      title.className = 'section-title';
      title.textContent = 'Pages:';
      numberSection.appendChild(title);
      numberSection.appendChild(numberContainer);
    }

    backBtn.style.display = historyStack.length > 1 ? 'inline-block' : 'none';
    if (!mainContainer.innerHTML && !numberSection.innerHTML) {
      mainContainer.textContent = 'No valid content';
    }
  } catch (err) {
    console.error(err);
    mainContainer.textContent = 'No valid content';
  }
}

backBtn.addEventListener('click', () => {
  historyStack.pop();
  const prev = historyStack.pop();
  if (prev) loadLinksFromUrl(prev);
});

loadLinksFromUrl('https://1moviesda.io/');
</script>
</body>
</html>
